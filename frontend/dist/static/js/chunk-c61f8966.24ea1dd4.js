(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c61f8966","chunk-2d0afe49","chunk-2d221c26"],{"0feb":function(t,e,n){"use strict";n.r(e),n.d(e,"getInfo",(function(){return i})),n.d(e,"getInfoById",(function(){return r})),n.d(e,"updateInfo",(function(){return a})),n.d(e,"addInfo",(function(){return s})),n.d(e,"deleteInfoById",(function(){return c})),n.d(e,"deleteAll",(function(){return u})),n.d(e,"getGroup",(function(){return l})),n.d(e,"getPermission",(function(){return d})),n.d(e,"Model",(function(){return f})),n.d(e,"SearchModel",(function(){return h}));n("7f7f");var o=n("1c1e");function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;return Object(o["a"])({url:"/api/permissions",method:"get",params:{pageSize:n,page:e,name:t.name,pid:t.pid,type:t.type}})}function r(t){return Object(o["a"])({url:"/api/permissions/"+t,method:"get"})}function a(t,e){return Object(o["a"])({url:"/api/permissions/"+t,method:"patch",data:e})}function s(t){return Object(o["a"])({url:"/api/permissions",method:"post",data:t})}function c(t){return Object(o["a"])({url:"/api/permissions/"+t,method:"delete"})}function u(t){return Object(o["a"])({url:"/api/permissions/deleteAll",method:"post",data:{ids:t}})}function l(){return Object(o["a"])({url:"/api/permissions/getGroup",method:"post"})}function d(){return Object(o["a"])({url:"/api/permissions/info",method:"get"})}function f(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;this.name=t,this.pid=e,this.type=n,this.route_name=o,this.remark=i}function h(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.name=t,this.pid=e,this.type=n}},"10ac":function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"role"}},[n("div",{attrs:{id:"datagrid"}},[n("div",{staticClass:"toolbar"},[n("el-button",{attrs:{plain:"",icon:"el-icon-plus"},on:{click:function(e){return t.add()}}},[t._v("添加")]),t._v(" "),n("el-alert",{attrs:{title:"为了演示方便，前端屏蔽了序号为1、2号角色的内容编辑操作，具体可以查看详细代码",type:"warning"}})],1),t._v(" "),n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:""}},[n("el-table-column",{attrs:{prop:"id",label:"序号",width:"70"}}),t._v(" "),n("el-table-column",{attrs:{prop:"name",label:"角色",width:"180"}}),t._v(" "),n("el-table-column",{attrs:{prop:"explain",label:"描述",width:"200"}}),t._v(" "),n("el-table-column",{attrs:{prop:"remark",label:"备注",width:"200"}}),t._v(" "),n("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return e.row.id>2?[n("el-tooltip",{attrs:{content:"设置功能",placement:"right-end"}},[n("el-button",{attrs:{plain:"",icon:"el-icon-edit-outline",size:"small"},on:{click:function(n){return t.setPermission(e.row)}}})],1),t._v(" "),n("el-tooltip",{attrs:{content:"编辑",placement:"right-end"}},[n("el-button",{attrs:{plain:"",icon:"el-icon-edit",type:"primary",size:"small"},on:{click:function(n){return t.edit(e.row)}}})],1),t._v(" "),n("el-tooltip",{attrs:{content:"删除",placement:"right-end"}},[n("el-button",{attrs:{plain:"",icon:"el-icon-delete",type:"danger",size:"small"},on:{click:function(n){return t.del(e.row)}}})],1)]:void 0}}],null,!0)})],1),t._v(" "),n("el-dialog",{attrs:{title:"修改角色信息",visible:t.editDialogFormVisible},on:{"update:visible":function(e){t.editDialogFormVisible=e},close:function(e){return t.cancel()}}},[n("el-form",{attrs:{model:t.form,"label-position":"top","label-width":"80px"}},[n("el-row",{staticClass:"first-row"},[n("el-col",{staticClass:"first-column",attrs:{span:12}},[n("el-form-item",{attrs:{label:"角色"}},[n("el-input",{attrs:{placeholder:""},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1)],1),t._v(" "),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"描述"}},[n("el-input",{attrs:{placeholder:""},model:{value:t.form.explain,callback:function(e){t.$set(t.form,"explain",e)},expression:"form.explain"}})],1)],1)],1),t._v(" "),n("el-row",{staticClass:"last-row"},[n("el-col",{staticClass:"first-column",attrs:{span:24}},[n("el-form-item",{attrs:{label:"备注"}},[n("el-input",{attrs:{type:"textarea"},model:{value:t.form.remark,callback:function(e){t.$set(t.form,"remark",e)},expression:"form.remark"}})],1)],1)],1)],1),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.save()}}},[t._v("确 定")]),t._v(" "),n("el-button",{on:{click:function(e){return t.cancel()}}},[t._v("取 消")])],1)],1),t._v(" "),n("el-dialog",{staticClass:"setPermission",attrs:{title:"设置角色功能",visible:t.isPermission,width:"60%"},on:{"update:visible":function(e){t.isPermission=e}}},[n("el-form",{attrs:{model:t.form,"label-width":"120px"}},[n("el-checkbox-group",{attrs:{size:"mini"},model:{value:t.form.permissions,callback:function(e){t.$set(t.form,"permissions",e)},expression:"form.permissions"}},[t._l(t.permissions,(function(e){return[n("el-form-item",{attrs:{label:e.name}},t._l(e.children,(function(e){return n("el-checkbox",{key:e.id,attrs:{border:"",label:e.id}},[t._v(t._s(e.name))])})),1)]}))],2)],1),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.savePermission()}}},[t._v("确 定")]),t._v(" "),n("el-button",{on:{click:function(e){return t.cancelPermission()}}},[t._v("取 消")])],1)],1)],1)])},i=[],r=(n("96cf"),n("3b8d")),a=n("cc5e"),s=n("a92f"),c=n("0feb"),u={name:"role_index",mixins:[s["a"]],data:function(){return{module:"role",isPermission:!1,permissions:[],checkPermissions:[]}},methods:{setPermission:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(c["getPermission"])();case 2:return n=t.sent,this.permissions=n.data,t.next=6,Object(a["getInfoById"])(e.id);case 6:n=t.sent,this.form=n.data,this.isPermission=!0;case 9:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),cancelPermission:function(){this.isPermission=!1},savePermission:function(){var t=this;this.isPermission=!1,Object(a["updateInfo"])(this.form.id,this.form).then((function(){t.success("角色信息更改成功")})).catch((function(e){console.log(e),t.error(e.response.info)}))}}},l=u,d=(n("a583"),n("2877")),f=Object(d["a"])(l,o,i,!1,null,null,null);e["default"]=f.exports},"6fbe":function(t,e,n){var o={"./admin":["50fc","chunk-2d0c798e"],"./admin.js":["50fc","chunk-2d0c798e"],"./api":["4ec3","chunk-2d0ccb97"],"./api.js":["4ec3","chunk-2d0ccb97"],"./chat":["d800","chunk-2d21ee4a"],"./chat.js":["d800","chunk-2d21ee4a"],"./dashboard":["5fd4","chunk-2d0d43d7"],"./dashboard.js":["5fd4","chunk-2d0d43d7"],"./editor":["e9bd","chunk-2d226cac"],"./editor.js":["e9bd","chunk-2d226cac"],"./log":["8916","chunk-7e20d9b0"],"./log.js":["8916","chunk-7e20d9b0"],"./login":["7ded"],"./login.js":["7ded"],"./member":["8194","chunk-ed8a7108"],"./member.js":["8194","chunk-ed8a7108"],"./order":["f8b7","chunk-ed606062"],"./order.js":["f8b7","chunk-ed606062"],"./other":["bfb4","chunk-2d21b84c"],"./other.js":["bfb4","chunk-2d21b84c"],"./pdf":["a633","chunk-2d208a0b"],"./pdf.js":["a633","chunk-2d208a0b"],"./permission":["0feb","chunk-2d0afe49"],"./permission.js":["0feb","chunk-2d0afe49"],"./role":["cc5e","chunk-2d221c26"],"./role.js":["cc5e","chunk-2d221c26"],"./work":["9b41","chunk-7e21e850"],"./work.js":["9b41","chunk-7e21e850"]};function i(t){var e=o[t];return e?Promise.all(e.slice(1).map(n.e)).then((function(){var t=e[0];return n(t)})):Promise.resolve().then((function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}))}i.keys=function(){return Object.keys(o)},i.id="6fbe",t.exports=i},"74b1":function(t,e,n){},"910c":function(t,e,n){var o={"./log":["1616","chunk-2d0ab800"],"./log.js":["1616","chunk-2d0ab800"],"./order":["f9ff","chunk-2d22e189"],"./order.js":["f9ff","chunk-2d22e189"],"./role":["ab009","chunk-7704ac42"],"./role.js":["ab009","chunk-7704ac42"]};function i(t){var e=o[t];return e?n.e(e[1]).then((function(){var t=e[0];return n(t)})):Promise.resolve().then((function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}))}i.keys=function(){return Object.keys(o)},i.id="910c",t.exports=i},a297:function(t,e,n){"use strict";var o={data:function(){return{isShowUpload:!1}},methods:{upload:function(){this.isShowUpload=!0},closeUpload:function(){this.isShowUpload=!1}},mounted:function(){},created:function(){}};e["a"]=o},a583:function(t,e,n){"use strict";var o=n("74b1"),i=n.n(o);i.a},a92f:function(t,e,n){"use strict";var o={methods:{success:function(t){this.$message({type:"success",message:t})},error:function(t){this.$message({type:"error",message:t})}}},i={data:function(){return{isShowDownload:!1}},methods:{download:function(){this.isShowDownload=!0},closeDownload:function(){this.isShowDownload=!1}},mounted:function(){},created:function(){}},r=i,a=n("a297");e["a"]={mixins:[o,r,a["a"]],data:function(){return{tableData:[],form:{},searchForm:{},isNew:!1,isEdit:!1,current_page:1,total:0,pageSize:10,editDialogFormVisible:!1}},created:function(){var t=this;n("910c")("./".concat(this.module)).then((function(e){var n=e.Model,o=e.SearchModel;t.form=new n,t.searchForm=new o}))},mounted:function(){this.fetchData()},methods:{fetchData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.searchForm,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.current_page,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.pageSize;n("6fbe")("./".concat(this.module)).then((function(n){var r=n.getInfo;r(e,o,i).then((function(e){t.tableData=e.data,t.total=e.meta.total}))}))},add:function(){var t=this;n("910c")("./".concat(this.module)).then((function(e){var n=e.Model;t.form=new n,t.setStatus(!0,!1,!0)}))},edit:function(t){var e=this;n("6fbe")("./".concat(this.module)).then((function(n){var o=n.getInfoById;o(t.id).then((function(t){e.form=t.data,e.setStatus(!1,!0,!0)}))}))},save:function(){this.isEdit&&!this.isNew&&(this.setStatus(),this.updateData()),!this.isEdit&&this.isNew&&(this.setStatus(),this.newData())},newData:function(){var t=this;n("6fbe")("./".concat(this.module)).then((function(e){var n=e.addInfo;n(t.form).then((function(e){t.success("创建角色成功"),t.fetchData()})).catch((function(e){t.error(e.response.data.info)}))}))},updateData:function(){var t=this;n("6fbe")("./".concat(this.module)).then((function(e){var n=e.updateInfo;n(t.form.id,t.form).then((function(e){t.success("角色信息更改成功"),t.fetchData()})).catch((function(e){t.error(e.response.data.info)}))}))},cancel:function(){this.setStatus()},setStatus:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.isEdit=e,this.isNew=t,this.editDialogFormVisible=n},del:function(t){var e=this;this.$confirm("此操作将永久删除该信息, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){n("6fbe")("./".concat(e.module)).then((function(n){var o=n.deleteInfoById;o(t.id).then((function(){e.success("删除成功!"),e.fetchData()})).catch((function(){}))}))}))},pagination:function(t){this.current_page=t,this.fetchData()},sizeChange:function(t){this.pageSize=t,this.fetchData()}}}},cc5e:function(t,e,n){"use strict";n.r(e),n.d(e,"getInfo",(function(){return i})),n.d(e,"getRoles",(function(){return r})),n.d(e,"getInfoById",(function(){return a})),n.d(e,"updateInfo",(function(){return s})),n.d(e,"deleteInfoById",(function(){return c})),n.d(e,"addInfo",(function(){return u}));var o=n("1c1e");function i(){return Object(o["a"])({url:"/api/roles",method:"get"})}function r(){return Object(o["a"])({url:"/api/getRoles",method:"get"})}function a(t){return Object(o["a"])({url:"/api/roles/"+t,method:"get"})}function s(t,e){return e.permissions=e.permissions.join(","),Object(o["a"])({url:"/api/roles/"+t,method:"PATCH",data:e})}function c(t){return Object(o["a"])({url:"/api/roles/"+t,method:"delete"})}function u(t){return t.permissions=t.permissions.join(","),Object(o["a"])({url:"/api/roles",method:"post",data:t})}}}]);